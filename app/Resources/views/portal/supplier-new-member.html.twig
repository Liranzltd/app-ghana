{% extends 'base-portal.html.twig' %}

{% block pagetitle %}Add Colleague{% endblock %}
{% block crumbtitle %}In this section, you can add a member of your team to perform all APP functions {% endblock %}
{% block body %}
<div class="main-panel">
  <div class="content">
    <div class="container">
      <div class="col-md-12">
        <div class="card">
          <div class="card-header">
              <h4 class="card-title">Add Colleague</h4>
              <span class="has-error">All fields are required</span>
          </div>
          <div class="card-content">
            <form class="mdl-grid" name="new-request" action="{{ path('supplier-add-to-team') }}"  method="POST">
              <div class="form-group">
                <label>First name*</label>
                <input type="text" id="firstname" name="firstname" class="form-control" required>
              </div>
              <div class="form-group">
                <label>Surname*</label>
                <input type="text" id="surname" name="surname" class="form-control" required>
              </div>
              <div class="form-group">
                <label>Email*</label>
                <input type="email" id="email" name="email" class="form-control" required>
                <small id="emailHelp" class="form-text text-muted invalid" style="/*! display: block; */margin: 10px 0;"></small>
              </div>
              <div class="form-group">
                <label>Gender*</label>
                <div class="radio">
      						<input type="radio" name="gender" id="female" value="Female" required>
      						<label for="radio1">
                  		Female
              		</label>
    						</div>
			         <div class="radio">
      						<input type="radio" name="gender" id="male" value="Male" required>
      						<label for="radio2">
                  		Male
              		</label>
    						</div>
              </div>
              <div class="form-group">
                <label>Telephone*</label>
                <input type="number" id="mobile" name="mobile" class="form-control" required>
              </div>
              <div class="form-group">
                <label>Mobile*</label>
                <input type="number" id="tel" name="tel" class="form-control" required>
              </div>
              <div class="form-group">
                <label>Select company*</label>
                <select class="form-control" name="company" required>
                  {% for company in member.companies %}
                  <option value="{{ company.id }}" {{ company.subscriptionStatus == 'Expired' ? 'disabled' : '' }}>{{ company.name }} - {{ company.subscriptionStatus }}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="row">
               <div class="col-lg-12">
                  <button type="submit" class="btn btn-wd btn-fill btn-info">
                     <span class="btn-label">
                       <i class="fa fa-check"></i>
                       </span>
                       Add Colleague
                 </button>
               </div>
             </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
{% block javascripts %}
  {{ parent() }}
  {% javascripts '@AppBundle/Resources/public/js/intlTelInput.js' '@AppBundle/Resources/public/js/defaultCountryIp.js' '@AppBundle/Resources/public/js/jquery-ui.js' '@AppBundle/Resources/public/js/jquery.ui.widget.js' '@AppBundle/Resources/public/js/parsley.min.js' filter='?jsqueeze' %}
      <script src="{{ asset_url }}"></script>
  {% endjavascripts %}
  <script>
    $(function ()
    {
      $('#email').on('focusout',function()
      {
        if($('#email').val())
        {
          checkRegistered('email',$('#email').val());
        }
      });
      function checkRegistered(field,value)
      {
        $.ajax({
          url: '{{ path('validate-info') }}',
          data: { field: field, value: value },
          success:  function(response)
          {
            if(response.status == 'exists')
            {
              $('#'+field).parent().addClass('has-error');
              $('#'+field+'Help').html(response.message);
              //console.log($('#'+field+'Help'));
            }
            else
            {
              // $('#'+field).closest('.col-lg-*').removeClass('has-error');
              $('#'+field+'Help').html('');
            }
          }
        });
      }
    });
  </script>
{% endblock %}
