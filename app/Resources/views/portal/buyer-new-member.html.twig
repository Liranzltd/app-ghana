{% extends 'base-buyer-portal.html.twig' %}

{% block pagetitle %}{{ buyer.name }} APP: New Colleague{% endblock %}
{% block crumbtitle %}In this section, you can add a member of your procurement team with post and edit requests to specific or all APP suppliers {% endblock %}
{% block body %}
<div class="main-panel">
  <div class="content">
    <div class="container">
      <div class="col-md-12">
        <div class="card">
          <div class="card-header">
              <h4 class="card-title">Add Colleague</h4>
          </div>
          <div class="card-content">
            <form class="mdl-grid" name="new-request" action="{{ path('add-to-team',{'slug': buyer.slug}) }}"  method="POST">
              <div class="form-group">
                <label>First name</label>
                <input type="text" id="firstname" name="firstname" class="form-control" required>
              </div>
              <div class="form-group">
                <label>Surname</label>
                <input type="text" id="surname" name="surname" class="form-control" required>
              </div>
              <div class="form-group">
                <label>Email</label>
                <input type="text" id="email" name="email" class="form-control" required>
                <small id="emailHelp" class="form-text text-muted invalid" style="/*! display: block; */margin: 10px 0;"></small>
              </div>
              <div class="form-group">
                <label>Gender</label>
                <div class="radio">
      						<input type="radio" name="gender" id="female" value="Female">
      						<label for="radio1">
                  		Female
              		</label>
    						</div>
			         <div class="radio">
      						<input type="radio" name="gender" id="male" value="Male">
      						<label for="radio2">
                  		Male
              		</label>
    						</div>
              </div>
              <div class="form-group">
                <label>Telephone</label>
                <input type="text" id="mobile" name="mobile" class="form-control" required>
              </div>
              <div class="form-group">
                <label>Mobile</label>
                <input type="text" id="tel" name="tel" class="form-control" required>
              </div>
              <div class="row">
               <div class="col-lg-12">
                 <input type="hidden" value="{{ buyer.id }}" name="buyer"/>
                  <button type="submit" class="btn btn-wd btn-fill btn-info">
                     <span class="btn-label">
                       <i class="fa fa-check"></i>
                       </span>
                       Add Colleague
                 </button>
               </div>
             </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
{% block javascripts %}
  {{ parent() }}
  <script>
    $(function ()
    {
      $('#email').on('focusout',function()
      {
        if($('#email').val())
        {
          checkRegistered('email',$('#email').val());
        }
      });
      function checkRegistered(field,value)
      {
        $.ajax({
          url: '{{ path('validate-info') }}',
          data: { field: field, value: value },
          success:  function(response)
          {
            if(response.status == 'exists')
            {
              $('#'+field).parent().addClass('has-error');
              $('#'+field+'Help').html(response.message);
              //console.log($('#'+field+'Help'));
            }
            else
            {
              // $('#'+field).closest('.col-lg-*').removeClass('has-error');
              $('#'+field+'Help').html('');
            }
          }
        });
      }
    });
  </script>
{% endblock %}
